---
import Divider from "./Divider.astro";

import { Image } from "astro:assets";

import turingMind from "../assets/TuringMind.jpg";
import Chip from "./Chip.astro";
import TailwindIcon from "./icons/TailwindIcon.astro";

interface Props {
	imagePath: string;
	title: string;
	description: string;
	fecha: string;
	link: string;
}

const images = import.meta.glob<{ default: ImageMetadata }>(
	"/src/assets/*.{jpeg,jpg,png,gif}"
);
const { imagePath, title, description, fecha, link } = Astro.props;

if (!images[imagePath])
	throw new Error(
		`"${imagePath}" does not exist in glob: "src/assets/*.{jpeg,jpg,png,gif}"`
	);
---

<article
	class="flex sm:flex-row sm:min-h-48 bg-background border-1 border-primary rounded-lg transition items-center min-h-40">
	<div
		class="items-center rotate-180 p-2 [writing-mode:_vertical-lr]">
		<time
			datetime="2022-10-10"
			class="flex items-center justify-between text-xs font-bold uppercase text-primary">
			<span>{fecha}</span>
		</time>
	</div>

	<section class="flex flex-col sm:justify-between sm:flex-row w-full py-3">
		<div class="sm:basis-56 place-content-center">
			<!-- <slot name="images" /> -->
			<!-- 		<img
				alt=""
				src="https://images.unsplash.com/photo-1609557927087-f9cf8e88de18?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1740&q=80"
				class="aspect-square h-full w-full object-cover"
			/> -->
			<Image
				src={images[imagePath]()}
				alt=""
				height={150}
				class="place-self-center"
			/>
		</div>

		<div class="flex flex-1 flex-col w-full justify-between">
			<div class="border-s p-4 border-l-transparent sm:px-6">
				<a href="#">
					<h3 class="font-bold text-primary">
						{title}
					</h3>
				</a>

				<p class="mt-2 line-clamp-3 text-sm/relaxed text-zinc-400">
					{description}
				</p>
			</div>
			<div
				class="w-full px-6 grid grid-cols-2 md:grid-cols-4 items-center place-self-center gap-3">
				<slot name="tecnologias" />
			</div>
		</div>
	</section>
</article>
